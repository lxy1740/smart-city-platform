/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { Directive, EventEmitter, Input, Output } from '@angular/core';
import { MapService } from '../providers/mapService';
export class TileLayderComponent {
    /**
     * @param {?} _service
     */
    constructor(_service) {
        this._service = _service;
        this.loaded = new EventEmitter();
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        const /** @type {?} */ func = this.getTilesUrl;
        this._service
            .addTileLayer(() => {
            this.tilelayer = new window.BMap.TileLayer(this.options);
            if (this.getTilesUrl) {
                this.tilelayer.getTilesUrl = function (tileCoord, zoom) {
                    return func(tileCoord, zoom);
                };
            }
            return this.tilelayer;
        })
            .then(() => {
            this.loaded.emit(this.tilelayer);
        });
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this._service.removeTileLayer(this.tilelayer);
    }
}
TileLayderComponent.decorators = [
    { type: Directive, args: [{
                selector: 'tilelayer'
            },] },
];
/** @nocollapse */
TileLayderComponent.ctorParameters = () => [
    { type: MapService, },
];
TileLayderComponent.propDecorators = {
    "getTilesUrl": [{ type: Input },],
    "options": [{ type: Input },],
    "loaded": [{ type: Output },],
};
function TileLayderComponent_tsickle_Closure_declarations() {
    /** @type {!Array<{type: !Function, args: (undefined|!Array<?>)}>} */
    TileLayderComponent.decorators;
    /**
     * @nocollapse
     * @type {function(): !Array<(null|{type: ?, decorators: (undefined|!Array<{type: !Function, args: (undefined|!Array<?>)}>)})>}
     */
    TileLayderComponent.ctorParameters;
    /** @type {!Object<string,!Array<{type: !Function, args: (undefined|!Array<?>)}>>} */
    TileLayderComponent.propDecorators;
    /** @type {?} */
    TileLayderComponent.prototype.getTilesUrl;
    /** @type {?} */
    TileLayderComponent.prototype.options;
    /** @type {?} */
    TileLayderComponent.prototype.loaded;
    /** @type {?} */
    TileLayderComponent.prototype.tilelayer;
    /** @type {?} */
    TileLayderComponent.prototype._service;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGlsZWxheWVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2FuZ3VsYXIyLWJhaWR1LW1hcC8iLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvdGlsZWxheWVyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFxQixNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUE7QUFFekYsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLHlCQUF5QixDQUFBO0FBT3BELE1BQU07Ozs7SUFRSixZQUFvQixRQUFvQjtRQUFwQixhQUFRLEdBQVIsUUFBUSxDQUFZO3NCQUpiLElBQUksWUFBWSxFQUFFO0tBSUQ7Ozs7SUFFckMsUUFBUTtRQUNiLHVCQUFNLElBQUksR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFBO1FBRTdCLElBQUksQ0FBQyxRQUFRO2FBQ1YsWUFBWSxDQUFDLEdBQUcsRUFBRTtZQUNqQixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFBO1lBRXhELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO2dCQUNyQixJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsR0FBRyxVQUFTLFNBQWlCLEVBQUUsSUFBWTtvQkFDbkUsTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLENBQUE7aUJBQzdCLENBQUE7YUFDRjtZQUNELE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFBO1NBQ3RCLENBQUM7YUFDRCxJQUFJLENBQUMsR0FBRyxFQUFFO1lBQ1QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFBO1NBQ2pDLENBQUMsQ0FBQTs7Ozs7SUFHQyxXQUFXO1FBQ2hCLElBQUksQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQTs7OztZQWpDaEQsU0FBUyxTQUFDO2dCQUNULFFBQVEsRUFBRSxXQUFXO2FBQ3RCOzs7O1lBTlEsVUFBVTs7OzRCQVFoQixLQUFLO3dCQUNMLEtBQUs7dUJBRUwsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERpcmVjdGl2ZSwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT25EZXN0cm95LCBPbkluaXQsIE91dHB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnXG5cbmltcG9ydCB7IE1hcFNlcnZpY2UgfSBmcm9tICcuLi9wcm92aWRlcnMvbWFwU2VydmljZSdcbmltcG9ydCB7IEJUaWxlTGF5ZXIsIFRpbGVMYXllck9wdGlvbnMsIGdldFRpbGVzVXJsRnVuYyB9IGZyb20gJy4uL3R5cGVzL1RpbGVMYXllcidcbmltcG9ydCB7IEJQaXhlbCB9IGZyb20gJy4uL3R5cGVzL1BpeGVsJ1xuXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICd0aWxlbGF5ZXInXG59KVxuZXhwb3J0IGNsYXNzIFRpbGVMYXlkZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSB7XG4gIEBJbnB1dCgpIHByaXZhdGUgZ2V0VGlsZXNVcmw6IGdldFRpbGVzVXJsRnVuY1xuICBASW5wdXQoKSBwcml2YXRlIG9wdGlvbnM6IFRpbGVMYXllck9wdGlvbnNcblxuICBAT3V0cHV0KCkgcHJpdmF0ZSBsb2FkZWQgPSBuZXcgRXZlbnRFbWl0dGVyKClcblxuICBwcml2YXRlIHRpbGVsYXllcjogQlRpbGVMYXllclxuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX3NlcnZpY2U6IE1hcFNlcnZpY2UpIHt9XG5cbiAgcHVibGljIG5nT25Jbml0KCkge1xuICAgIGNvbnN0IGZ1bmMgPSB0aGlzLmdldFRpbGVzVXJsXG5cbiAgICB0aGlzLl9zZXJ2aWNlXG4gICAgICAuYWRkVGlsZUxheWVyKCgpID0+IHtcbiAgICAgICAgdGhpcy50aWxlbGF5ZXIgPSBuZXcgd2luZG93LkJNYXAuVGlsZUxheWVyKHRoaXMub3B0aW9ucylcblxuICAgICAgICBpZiAodGhpcy5nZXRUaWxlc1VybCkge1xuICAgICAgICAgIHRoaXMudGlsZWxheWVyLmdldFRpbGVzVXJsID0gZnVuY3Rpb24odGlsZUNvb3JkOiBCUGl4ZWwsIHpvb206IG51bWJlcikge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmModGlsZUNvb3JkLCB6b29tKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy50aWxlbGF5ZXJcbiAgICAgIH0pXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHRoaXMubG9hZGVkLmVtaXQodGhpcy50aWxlbGF5ZXIpXG4gICAgICB9KVxuICB9XG5cbiAgcHVibGljIG5nT25EZXN0cm95KCkge1xuICAgIHRoaXMuX3NlcnZpY2UucmVtb3ZlVGlsZUxheWVyKHRoaXMudGlsZWxheWVyKVxuICB9XG59XG4iXX0=