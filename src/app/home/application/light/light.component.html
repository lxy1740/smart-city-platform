<!-- 地图 -->
<div class="map_warp">
    <!-- 选择区域 -->
    <div class="Selection-Region" *ngIf="visible == true">
        <!-- 城市列表 -->
        <div class="d-inline-block sel-area-block" (mouseleave)="citylistMouseleave()">
        
            <span class="cl-blue cur-pointer" (mouseover)="showCiyt()">
                <span class="filter" *ngIf="node">{{node.name}}</span>
                <span class="filter" *ngIf="!currentCity">选择城市</span>
                <!-- <i class="fa fa-bell-o nav-icon " aria-hidden="true"></i> -->
            </span>
            <div id="city-panel" class="city-panel dropdown_panel" *ngIf="cityshow">
                <div class="dropdown_panel_inner">
                    <span class="menu_arrow_left"></span>
                    <dl *ngFor="let item of cityList">
                        <dt>{{item.name}}</dt>
                        <dd *ngIf="item.children && item.children.length > 0">
                            <a title="智慧城市" *ngFor="let itemc of item.children" (click)="selecteCity(itemc)">{{itemc.name}}</a>
                        </dd>
                    </dl>
                </div>
        
            </div>
        
        </div>
        
        <!-- 区域列表 -->
        <div class="d-inline-block sel-area-block" (mouseleave)="arealistMouseleave()">
        
            <span class="cl-blue cur-pointer" (mouseover)="showArea()">
                <span class="filter">选择区域</span>
            </span>
        
            <div class="arealist-wrap dropdown_panel" *ngIf="areashow">
                <div class="dropdown_panel_inner">
                    <span class="menu_arrow_left"></span>
                    <ul class="arealist" data-type="area">
                        <li data-val="0" class="arealist-item" (mouseover)="arealistMouseNone()">
                            <em>不限</em>
                        </li>
                        <li class="arealist-item" *ngFor="let node of currentChildren" (mouseover)="arealistMouseover(node)" (click)="selecteblock(node)">
                            <em>{{node.name}}</em>
                        </li>
        
                    </ul>
                    <div class="blocklist-wrap" *ngIf="currentBlock">
                        <ul class="blocklist" data-type="block">
                            <li data-val="0">不限</li>
                            <li *ngFor="let block of currentBlock" (click)="selecteblock(block)">{{block.name}}</li>
        
                        </ul>
                    </div>
        
        
                </div>
        
        
            </div>
        
        </div>
    </div>
    
    <!-- 右边按钮 -->
    <div class="btn-icon" *ngIf="visible == true">
        <div class="d-inline-block icon-item cur-pointer">
            <img src="../../../../assets/imgs/control.png" alt="图片" (click)="jumpHandle()">
    
        </div>
    
        <div class="d-inline-block icon-item cur-pointer">
    
            <img src="../../../../assets/imgs/switch.png" alt="图片" (click)="enterFullScreen()">
        </div>
    
    </div>
    <!-- 地图 -->
    <div #map5 id="map_container5" class="map_container no-fulls-map"></div>

    <!-- 设备操作 -->
    <div class="device-detail" *ngIf="deviceChild">
        <div class="device-title">
            <span class="device-close float-right" (click)="closeDetail()">X</span>
        </div>
        <div *ngIf="deviceChild.has_child == 0">
            <p>
                <span>设备名称:</span>
                <span>{{deviceChild.name}}</span>
            </p>
            <p>
                <span>设备ID:</span>
                <span>{{deviceChild.id}}</span>
            </p>
            <table class="table">
                <tr>
                    <th>参数</th>
                    <th>值</th>
                    <th>单位</th>
    
                </tr>
                <tr *ngFor="let item of deviceChild.parameters">
                    <td>{{item.name}}</td>
                    <td>{{item.value}}</td>
                    <td>{{item.Unit}}</td>
                </tr>
            </table>
        </div>
        <div *ngIf="deviceChild.has_child == 1">
            <div *ngFor="let cChild of deviceChild.children;let i = index" [ngClass]="{'info-border':i !==deviceChild.children.length -1}">
                <p>
                    <span>设备名称:</span>
                    <span>{{cChild.name}}</span>
                </p>
                <p>
                    <span>设备ID:</span>
                    <span>{{cChild.id}}</span>
                </p>
                <table class="table">
                    <tr>
                        <th>参数</th>
                        <th>值</th>
                        <th>单位</th>
    
                    </tr>
                    <tr *ngFor="let citem of cChild.parameters" [ngClass]="{'color-red':cChild.is_exception ==1 || cChild.is_online == 0}">
                        <td>{{citem.name}}</td>
                        <td>{{citem.value}}</td>
                        <td>{{citem.Unit}}</td>
                    </tr>
                </table>
            </div>
    
        </div>
    
    </div>

</div>

